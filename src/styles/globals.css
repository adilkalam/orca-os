/*
  Global CSS (Token-driven)
  - Reset/normalize
  - Design tokens in :root
  - Base elements and typography
  - Component primitives (button, card, grid, table, badge, divider, progress)
  Policy: No Tailwind/daisyUI. No inline styles (except CSS vars usage).
*/

/* -------- Reset / Normalize -------- */
*, *::before, *::after { box-sizing: border-box; }
* { margin: 0; }
html, body { height: 100%; }
img, picture, video, canvas, svg { display: block; max-width: 100%; }
input, button, textarea, select { font: inherit; }
button { background: none; border: 0; padding: 0; cursor: pointer; }
a { color: inherit; text-decoration: none; }
ul[role='list'], ol[role='list'] { list-style: none; padding: 0; }

/* -------- Fonts: Local @font-face (Supreme LL, GT Pantheon) -------- */
@font-face {
  font-family: 'Supreme LL';
  src: url('/fonts/supreme/SupremeLL-Regular.otf') format('opentype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'Supreme LL';
  src: url('/fonts/supreme/SupremeLL-Medium.otf') format('opentype');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'Supreme LL';
  src: url('/fonts/supreme/SupremeLL-Bold.otf') format('opentype');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'GT Pantheon Display';
  src: url('/fonts/gt-pantheon/GTPantheonDisplay-Light.otf') format('opentype');
  font-weight: 300;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'GT Pantheon Text';
  src: url('/fonts/gt-pantheon/GTPantheonText-Light.otf') format('opentype');
  font-weight: 300;
  font-style: normal;
  font-display: swap;
}

/* -------- Tokens -------- */
:root {
  /* Fonts */
  --font-sans: 'Supreme LL', ui-sans-serif, -apple-system, system-ui, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  --font-serif-display: 'GT Pantheon Display', ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
  --font-serif-text: 'GT Pantheon Text', ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

  /* Type scale (rem) */
  --fs-1: 0.75rem;   /* 12 */
  --fs-2: 0.875rem;  /* 14 */
  --fs-3: 1rem;      /* 16 */
  --fs-4: 1.125rem;  /* 18 */
  --fs-5: 1.375rem;  /* 22 */
  --fs-6: 1.75rem;   /* 28 */
  --fs-7: 2.25rem;   /* 36 */
  --fs-8: 3rem;      /* 48 */

  /* Line heights */
  --lh-tight: 1.15;
  --lh-body: 1.55;

  /* Spacing scale */
  --space-1: 4px;  --space-2: 8px;  --space-3: 12px; --space-4: 16px;
  --space-5: 20px; --space-6: 24px; --space-7: 28px; --space-8: 32px;
  --space-10: 40px; --space-12: 48px; --space-16: 64px; --space-20: 80px; --space-24: 96px; --space-30: 120px;

  /* Radii */
  --radius-1: 6px; --radius-2: 10px; --radius-3: 14px; --radius-round: 999px;

  /* Easing & durations */
  --ease-standard: cubic-bezier(0.2, 0.8, 0.2, 1);
  --ease-emph: cubic-bezier(0.16, 1, 0.3, 1);
  --dur-fast: 150ms; --dur-med: 250ms; --dur-slow: 400ms;
  --dur-xslow: 700ms; --dur-xxslow: 1100ms; --dur-hero: 1400ms;

  /* Shadows */
  --shadow-1: 0 1px 2px rgba(0,0,0,0.24), 0 1px 1px rgba(0,0,0,0.12);
  --shadow-2: 0 4px 16px rgba(0,0,0,0.24), 0 2px 8px rgba(0,0,0,0.12);
  --shadow-3: 0 12px 40px rgba(0,0,0,0.28), 0 6px 20px rgba(0,0,0,0.16);

  /* OBDN Color Tokens (dark baseline, no gradients) */
  --surface: #0A0912; /* obsidian */
  --surface-2: rgba(235,238,255,0.03);
  --elevated: rgba(235,238,255,0.05);
  --text: rgba(255,255,255,0.90);
  --text-muted: rgba(255,255,255,0.60);
  --text-subtle: rgba(255,255,255,0.50);
  --border: rgba(235,238,255,0.06);
  --border-subtle: rgba(235,238,255,0.05);
  --border-faint: rgba(235,238,255,0.03);
  --accent: #D9A95A; /* gold */
  --accent-contrast: #0A0912;

  /* Component tokens */
  --container-max: 1120px;
  --card-bg: var(--surface-2);
  --card-border: var(--border);
}

@media (prefers-color-scheme: dark) {
  :root {
    /* Dark is default; no change for prefers dark */
  }
}

/* -------- Theme: Augen (editorial, high-contrast) -------- */
.theme-augen {
  --surface: hsl(240 10% 5%);
  --surface-2: hsl(240 9% 7%);
  --elevated: hsl(240 10% 8%);
  --text: hsl(0 0% 96%);
  --text-muted: hsl(220 6% 64%);
  --border: hsl(240 8% 16%);
  --brand-h: 265; --brand-s: 88%; --brand-l: 62%;
  --brand: hsl(var(--brand-h) var(--brand-s) var(--brand-l));
  --brand-weak: hsl(var(--brand-h) 70% 70%);
  /* Motion tokens (Augen) */
  --drift-duration: 120s;
  --reveal-duration: 720ms;
  --reveal-ease: cubic-bezier(0.2, 0.8, 0.2, 1);
  --glide-ease: cubic-bezier(0.16, 1, 0.3, 1);
  /* Background */
  background: radial-gradient(800px 600px at 15% -10%, hsl(var(--brand-h) 90% 60% / 0.06), transparent 40%),
              radial-gradient(700px 500px at 90% -10%, hsl(195 90% 60% / 0.05), transparent 45%),
              var(--surface);
}

/* -------- Base -------- */
html { color-scheme: light dark; }
body {
  font-family: var(--font-sans);
  font-size: var(--fs-3);
  line-height: var(--lh-body);
  background: radial-gradient(1200px 800px at 10% -10%, hsl(var(--brand-h) 70% 65% / 0.08), transparent 40%),
              radial-gradient(800px 600px at 85% -5%, hsl(190 70% 60% / 0.06), transparent 40%),
              var(--surface);
  color: var(--text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.page { width: 100%; }
.container { width: min(100%, var(--container-max)); margin-inline: auto; padding: var(--space-12) var(--space-6); }

/* Typography */
.display { font-family: var(--font-serif-display); font-size: clamp(2.25rem, 1.6rem + 2.4vw, 3.25rem); line-height: 1.12; letter-spacing: 0.01em; font-weight: 300; text-transform: none; }
.h1 { font-size: var(--fs-7); line-height: var(--lh-tight); font-weight: 700; letter-spacing: -0.01em; }
.h2 { font-size: var(--fs-6); line-height: var(--lh-tight); font-weight: 650; }
.h3 { font-size: var(--fs-5); font-weight: 650; }
.h4 { font-size: var(--fs-4); font-weight: 600; }
.body { font-size: var(--fs-3); color: var(--text); }
.muted { color: var(--text-muted); }
.label { font-size: var(--fs-2); letter-spacing: 0.14em; text-transform: uppercase; color: var(--text-muted); }

/* Divider */
.divider { height: 1px; background: var(--border); margin: var(--space-10) 0; }

/* Grid */
.grid { display: grid; gap: var(--space-8); grid-template-columns: repeat(var(--cols, 1), minmax(0, 1fr)); }
@media (min-width: 720px) { .grid[data-cols='2'] { --cols: 2; } .grid[data-cols='3'] { --cols: 3; } .grid[data-cols='4'] { --cols: 4; } }

/* Card */
.card { background: var(--card-bg); border: 1px solid var(--card-border); border-radius: var(--radius-2); box-shadow: var(--shadow-1); transition: transform var(--dur-med) var(--ease-standard), box-shadow var(--dur-med) var(--ease-standard), border-color var(--dur-med) var(--ease-standard); padding: var(--space-8); }
.card:hover { transform: translateY(-2px); box-shadow: var(--shadow-2); border-color: var(--border-subtle); }
.card--tight { padding: var(--space-4); }

/* Button */
.button { display: inline-flex; align-items: center; justify-content: center; gap: 10px; height: 40px; padding: 0 16px; border-radius: var(--radius-1); border: 1px solid var(--border); background: var(--surface-2); color: var(--text); transition: background var(--dur-fast) var(--ease-standard), border-color var(--dur-fast) var(--ease-standard), transform var(--dur-fast) var(--ease-standard); }
.button:hover { transform: translateY(-1px); border-color: var(--border-subtle); }
.button--primary { background: var(--accent); color: var(--surface); border-color: transparent; }
.button--primary:hover { filter: brightness(1.03); }
.button--ghost { background: transparent; border-color: var(--border); }

/* Badge */
.badge { display: inline-flex; align-items: center; gap: 8px; padding: 2px 8px; border-radius: var(--radius-round); font-size: var(--fs-2); color: var(--text-subtle); background: var(--surface-2); border: 1px solid var(--border); }
.badge--accent { color: var(--surface); background: var(--accent); border-color: transparent; }

/* Table */
.table { width: 100%; border-collapse: collapse; }
.table th, .table td { text-align: left; padding: 10px 12px; border-bottom: 1px solid var(--border); }
.table th { font-size: var(--fs-2); letter-spacing: 0.14em; color: var(--text-muted); text-transform: uppercase; }
.table tbody tr { transition: background var(--dur-fast) var(--ease-standard); }
.table tbody tr:hover { background: var(--surface-2); }

/* Hero */
.hero { padding: var(--space-16) 0 var(--space-12); }
.hero .lede { max-width: 72ch; color: var(--text-muted); }
.hero--augen { position: relative; padding: clamp(64px, 8vw, 120px) 0; border-top: 1px solid var(--border); }

/* Section header */
.section-header { display: block; margin-bottom: var(--space-8); }
.section-header .label { display: block; margin-bottom: var(--space-3); }
.section-header .h2 { margin: 0; }

/* Stat */
.stat { display: grid; gap: 4px; }
.stat .stat__label { font-size: var(--fs-2); color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.14em; }
.stat .stat__value { font-family: var(--font-mono); font-size: clamp(1.4rem, 1.1rem + 1vw, 2rem); }
.stat .stat__delta { font-size: var(--fs-2); color: var(--text-muted); }

/* Progress bar (set --value: 0%–100%) */
.progress { position: relative; height: 8px; background: var(--surface-2); border-radius: var(--radius-round); overflow: hidden; border: 1px solid var(--border); }
.progress::before { content: ""; position: absolute; inset: 0; transform: scaleX(var(--_x, 0)); transform-origin: left; background: var(--accent); transition: transform var(--dur-slow) var(--ease-emph); }
.progress[style*="--value"]::before { --_x: calc(var(--value) / 100); }

/* Timeline progress (uses --progress 0..1) */
.timeline { position: relative; height: 2px; background: var(--border); border-radius: 2px; overflow: hidden; }
.timeline::before { content: ""; position: absolute; inset: 0; background: linear-gradient(90deg, var(--accent), transparent); transform: scaleX(var(--p, 0)); transform-origin: left; transition: transform var(--dur-hero) var(--glide-ease); }
.timeline[style*="--progress"]::before { --p: var(--progress); }
.timeline__dots { display: flex; justify-content: space-between; margin-top: 8px; }
.timeline__dot { width: 6px; height: 6px; border-radius: 6px; background: var(--border); }
.timeline__dot--active { background: var(--accent); }

/* Sticky pipeline layout */
.sticky-grid { display: grid; grid-template-columns: 1fr; gap: var(--space-8); }
@media (min-width: 960px) { .sticky-grid { grid-template-columns: 0.9fr 1.1fr; align-items: start; } }
.pin { position: sticky; top: 72px; display: grid; gap: var(--space-6); }
.pipeline-rail { display: grid; gap: var(--space-6); }
.pipeline-title { font-family: var(--font-serif-text); font-size: var(--fs-6); font-weight: 300; letter-spacing: 0.01em; }
.steps { display: grid; gap: var(--space-6); }
.step { border: 1px solid var(--border); background: var(--surface-2); border-radius: var(--radius-2); padding: var(--space-6); transition: border-color var(--dur-fast) var(--ease-standard), transform var(--dur-fast) var(--ease-standard); }
.step .label { color: var(--text-muted); }
.step.is-active { border-color: var(--accent); transform: translateY(-2px); }
.step .h3 { margin-bottom: var(--space-3); }

/* Code/Artifact blocks */
.code-block { background: var(--surface-2); border: 1px solid var(--border); border-radius: var(--radius-2); padding: var(--space-6); overflow: auto; font-family: var(--font-mono); font-size: 13px; line-height: 1.6; }
.code-block::before { content: ""; display: block; height: 2px; background: linear-gradient(90deg, var(--accent), transparent); margin-bottom: var(--space-4); border-radius: 2px; }
.code-grid { display: grid; gap: var(--space-8); grid-template-columns: 1fr; }
@media (min-width: 960px) { .code-grid { grid-template-columns: 1fr 1fr; } }

/* Masked reveal for artifacts */
.reveal-mask { --m: 0; opacity: 0; transform: translateY(10px); clip-path: inset(0 0 calc((1 - var(--m)) * 100%) 0 round var(--radius-2)); transition: clip-path var(--dur-hero) var(--glide-ease), opacity var(--dur-slow) var(--glide-ease), transform var(--dur-slow) var(--glide-ease); }
.in .reveal-mask, .reveal-mask.in { --m: 1; opacity: 1; transform: none; }
/* Mini bar chart (CSS only). Use data-value attribute (0–100) */
.bars { display: flex; align-items: flex-end; gap: 6px; height: 64px; }
.bars .bar { width: 8px; border-radius: 3px; background: var(--accent); opacity: 0.9; box-shadow: 0 1px 0 rgba(0,0,0,0.2) inset; transform-origin: bottom; }
.bars .bar[data-value] { height: calc(var(--h, 0) * 1%); }
.bars .bar[data-value="0"] { --h: 0; }
.bars .bar[data-value="20"] { --h: 20; }
.bars .bar[data-value="35"] { --h: 35; }
.bars .bar[data-value="50"] { --h: 50; }
.bars .bar[data-value="65"] { --h: 65; }
.bars .bar[data-value="80"] { --h: 80; }
.bars .bar[data-value="100"] { --h: 100; }

/* List */
.bullet-list { display: grid; gap: 8px; padding-left: 1.1em; }
.bullet-list li { list-style: disc; color: var(--text); }

/* Nav */
.nav { display: flex; align-items: center; justify-content: space-between; padding: var(--space-6) 0; }
.nav__brand { display: inline-flex; align-items: center; gap: 8px; font-weight: 700; letter-spacing: -0.01em; }
.nav__links { display: flex; align-items: center; gap: 16px; }
.nav__link { color: var(--text-muted); transition: color var(--dur-fast) var(--ease-standard); }
.nav__link:hover { color: var(--text); }

/* Footer */
.footer { display: grid; grid-template-columns: 1fr auto; align-items: center; gap: var(--space-6); margin-top: var(--space-24); }

/* Utility containers */
.surface { background: var(--surface-2); border: 1px solid var(--border); border-radius: var(--radius-2); }

/* Data row */
.row { display: flex; align-items: center; justify-content: space-between; gap: var(--space-6); }

/* Density helpers */
.tight { gap: 6px; }
.pad-4 { padding: var(--space-4); }
.pad-6 { padding: var(--space-6); }
.mt-8 { margin-top: var(--space-8); }
.mt-12 { margin-top: var(--space-12); }

/* Vertical rhythm helpers */
.stack > * + * { margin-top: var(--space-8); }
.stack-tight > * + * { margin-top: var(--space-6); }
.stack-loose > * + * { margin-top: var(--space-12); }

/* Editorial hero (Augen) */
.split { display: grid; gap: var(--space-8); grid-template-columns: 1fr; }
@media (min-width: 860px) { .split { grid-template-columns: 1.15fr 1fr; align-items: end; } }
.kicker { font-size: var(--fs-2); letter-spacing: 0.18em; text-transform: uppercase; color: var(--text-muted); }
.pill { display: inline-flex; align-items: center; gap: 8px; height: 28px; padding: 0 10px; border-radius: 999px; border: 1px solid var(--border); background: var(--surface-2); font-size: var(--fs-2); color: var(--text-muted); }
.mono { font-family: var(--font-mono); }
.rule { height: 1px; background: var(--border); }

/* Framing + gridlines */
.frame { position: relative; border-radius: 16px; border: 1px solid var(--border); background: linear-gradient(180deg, hsl(0 0% 100% / 0.02), hsl(0 0% 100% / 0)) padding-box, var(--surface-2); overflow: hidden; }
.frame--hero { aspect-ratio: 16/10; }
.gridlines { display: none; }
.orb { display: none; }
.accent-dot { width: 8px; height: 8px; border-radius: 8px; background: var(--accent); box-shadow: none; }

@keyframes grid-drift {}

/* Reveal animations */
[data-reveal] { opacity: 0; transform: translateY(12px); transition: opacity var(--reveal-duration) var(--reveal-ease), transform var(--reveal-duration) var(--reveal-ease); will-change: opacity, transform; }
.is-in [data-reveal], [data-reveal].in { opacity: 1; transform: none; }
[data-reveal="zoom"] { transform: scale(0.98); }

/* Card lift with perspective */
.card { transform-style: preserve-3d; backface-visibility: hidden; }
.card:hover { transform: translateY(-2px) scale(1.01); }
.accent-dot { width: 8px; height: 8px; border-radius: 8px; background: var(--accent); box-shadow: none; }

/* DS aliases matching existing ds- classes (for compatibility) */
.ds-container { width: min(100%, var(--container-max)); margin-inline: auto; padding: 0 var(--space-4) var(--space-12); }
.ds-label { font-size: var(--fs-2); letter-spacing: 0.14em; text-transform: uppercase; color: var(--text-muted); }
.ds-display { font-size: clamp(2.25rem, 1.6rem + 2.4vw, 3.25rem); line-height: 1.12; letter-spacing: 0.01em; font-weight: 300; text-transform: none; font-family: var(--font-serif-display); }
.ds-description { font-size: var(--fs-3); color: var(--text-muted); }
.ds-card { background: var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: var(--radius-2);
  box-shadow: var(--shadow-1);
  transition: transform var(--dur-med) var(--ease-standard), box-shadow var(--dur-med) var(--ease-standard), border-color var(--dur-med) var(--ease-standard);
  padding: var(--space-8);
}
.ds-card-hover:hover { transform: translateY(-2px); box-shadow: var(--shadow-2); border-color: var(--border-subtle); }
.ds-button { display: inline-flex; align-items: center; justify-content: center; gap: 10px; height: 40px; padding: 0 16px; border-radius: var(--radius-1); border: 1px solid var(--border); background: var(--surface-2); color: var(--text); transition: background var(--dur-fast) var(--ease-standard), border-color var(--dur-fast) var(--ease-standard), transform var(--dur-fast) var(--ease-standard); }
.ds-button:hover { transform: translateY(-1px); border-color: var(--border-subtle); }
.ds-button-primary { background: var(--accent); color: var(--surface); border-color: transparent; }
.ds-button-primary:hover { filter: brightness(1.03); }
.ds-button-secondary { background: transparent; border-color: var(--border); }
.ds-badge { display: inline-flex; align-items: center; gap: 8px; padding: 2px 8px; border-radius: var(--radius-round); font-size: var(--fs-2); color: var(--text-subtle); background: var(--surface-2); border: 1px solid var(--border); }
.ds-badge-active { color: var(--surface); background: var(--accent); border-color: transparent; }
.ds-badge-pending { background: var(--surface-2); }
.ds-divider { height: 1px; background: var(--border); margin: var(--space-10) 0; }
.ds-h3 { font-size: var(--fs-5); font-weight: 650; }
.ds-h4 { font-size: var(--fs-4); font-weight: 600; }
.ds-body { font-size: var(--fs-3); color: var(--text); }
.ds-table { width: 100%; border-collapse: collapse; }
.ds-table th, .ds-table td { text-align: left; padding: var(--space-3) var(--space-4); border-bottom: 1px solid var(--border); }
.ds-table th { font-family: var(--font-sans); letter-spacing: 0.12em; text-transform: uppercase; font-size: 12px; color: var(--text-muted); }

/* Aliases for existing page local classes */
.cards-grid { display: grid; grid-template-columns: 1fr; gap: var(--space-8); }
@media (min-width: 768px) { .cards-grid { grid-template-columns: repeat(3, 1fr); } }
.card-grid  { display: grid; grid-template-columns: 1fr; gap: var(--space-8); }
.table-wrapper { overflow-x: auto; }
